Sourdough App: Key Design & Seed Data DecisionsThis document summarizes the key choices made during our discussion regarding the database seed data, system table configurations, and predefined recipe structures for the Sourdough Application. These decisions are intended to inform UI/UX design, backend recipe calculation logic, and overall application behavior.1. General Schema & Seed Data Philosophy"Advanced" Classification:Decision: Items (such as Fields, Ingredients, StepTemplates, and Recipes) will be marked with an advanced: true flag if they are intended for optional fine-tuning, involve complexity beyond basic baking (e.g., specific calculations, less common techniques), or pertain to ingredients/steps not typically found in beginner recipes.Implication for UI/Logic: The user interface should clearly distinguish between standard and advanced options. Advanced items might be hidden by default, placed in separate sections, or otherwise visually differentiated to keep the primary user flow simple and uncluttered for beginners.Simplicity for Non-Advanced Paths:Decision: The default user experience, especially for users not engaging with "advanced" features, must be streamlined, intuitive, and straightforward.Implication for UI/Logic: Non-advanced StepTemplates should primarily feature non-advanced Fields. If a generally non-advanced StepTemplate needs to include a Field that is considered advanced, that specific StepTemplateField association should be marked as advanced: true.2. Ingredient Handling & DefinitionsWater and Salt in Main "Mix Dough" Step:Decision: For basic recipes, the quantities of water and salt required for the main "Mix Dough" step will be primarily driven by the global Recipe.hydration_pct and Recipe.salt_pct fields.Consequently, explicit RecipeStepIngredient entries for "Water" and "Salt" will be omitted for this step in such standard recipes.The "Mix Dough" StepTemplate will still allow "Liquid" and "Salt" categories to be added via its StepTemplateIngredientRules (i.e., required: false). This permits advanced users to create recipes with staged additions of water/salt or to override global settings if necessary.Implication for UI/Logic: The recipe calculator is responsible for accurately determining the required water and salt amounts for the main mix based on the global recipe targets, while also accounting for any water and salt present in preferments or other ingredients. The UI should clearly indicate that these amounts are calculated.Baker's Percentages for RecipeStepIngredient.percentage:Decision: The basis for calculating the percentage field for a RecipeStepIngredient is context-dependent:Preferment Steps (e.g., "Activate Starter / Feed Levain"): Percentages for ingredients (e.g., flour, water) added to build the preferment are calculated relative to the total flour within that specific preferment step itself.Main "Mix Dough" Step: Percentages for flours added in this step are calculated relative to the main dough flour (defined as: Total Recipe Flour - Flour from any Preferments). These flour percentages for the main dough should sum to 100% of this main dough flour quantity.Implication for UI/Logic: The UI for adding ingredients to recipe steps needs to be clear about the context for percentage calculation. The backend recipe calculator must be robust enough to handle these different contexts accurately."Water" and "Salt" as Ingredient Records:Decision: "Water" and "Salt" will remain as non-advanced Ingredient records in the database. Their "advanced" nature in a recipe comes from how they are used (e.g., multi-stage additions, specific hydration techniques) rather than the ingredients themselves being inherently advanced.3. Field Definitions & Usage"Target Dough Temperature" (DDT) for Mix Step:Decision: A dedicated Field for "Target Dough Temperature" for the "Mix Dough" step will not be included in the system tables. Users who wish to note their intended dough temperature after mixing can utilize the general "Notes" Field available for that RecipeStep.Implication for UI/Logic: This simplifies the number of specialized fields associated with the mixing step, keeping the interface cleaner.General "Temperature" Field:Decision: This existing Field will continue to be used for specifying ambient or environmental temperatures in various steps, such as preferment building, bulk fermentation, proofing, and for setting the oven temperature during the baking step.Bake Step Durations:Decision: Two distinct Field records will be created and used specifically for baking durations to enhance clarity:"Initial Bake Duration (Covered/Steamed)""Final Bake Duration (Uncovered)"These specific fields will be associated with the "Bake" StepTemplate. The generic "Duration" Field will remain available for other step types where a single duration is typically sufficient.Implication for UI/Logic: Provides a more explicit and user-friendly interface for planning the different phases of a bake step.Preferment Definition Fields:Decision: Two specific Fields will be incorporated into the "Activate Starter / Feed Levain" StepTemplate to allow users to define their preferment accurately:"Preferment % of Total Dough Weight": This field allows the user to define the preferment's total target weight as a percentage of the overall Recipe.total_weight."Target Preferment Hydration (%)": This field allows the user to specify the internal hydration of the preferment itself (e.g., 100% for a liquid levain, lower for a stiff levain).Implication for UI/Logic: The recipe calculator will use these inputs to determine the precise amounts of flour and water required for the preferment step. The UI must present these fields clearly when a user is configuring a preferment step.4. Step Template DesignPreferment StepTemplate ("Activate Starter / Feed Levain"):Decision: For initial simplicity, a single, general StepTemplate for preferments will be used. Users can then name their specific RecipeStep instances descriptively (e.g., "My Rye Levain Build," "Overnight Poolish") and customize the ingredients and field values within that step.Bulk Fermentation Folds Representation:Decision: The existing Fields ("Number of Folds," "Fold Interval (minutes)," and the advanced "Fold Type (text)") are considered sufficient for users to plan and record their folding strategies during bulk fermentation. The "Fold Type" is acknowledged more as a technique preference rather than a strict recipe parameter for all users.5. Predefined RecipesSystem User Requirement for Predefined Recipes:Decision: A "system" user (e.g., system@sourdough.app) will be created during the database seeding process. All predefined recipes (those marked with isPredefined: true) will be assigned to this system user as their ownerId. This fulfills the non-optional ownerId requirement in the Recipe schema.Selection and Structure of Predefined Recipes:Decision: Three predefined recipes will be seeded to provide users with a starting point and showcase different aspects of the application:"Classic Everyday Sourdough" (Simple)"Homestyle Whole Wheat Blend Sourdough" (Simple)"Seeded Rye Sourdough with Soaker" (Advanced)These recipes will be structured according to all other decisions outlined in this document (e.g., how water and salt are handled in the mix step, how preferments are defined, context-dependent ingredient percentages).The advanced recipe ("Seeded Rye Sourdough with Soaker") will also include a "Prepare Soaker" step, utilizing a dedicated StepTemplate for this type of preparation, thereby demonstrating the system's flexibility.